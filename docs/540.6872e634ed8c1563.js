"use strict";(self.webpackChunkcat_facts=self.webpackChunkcat_facts||[]).push([[540],{2540:(B,Z,l)=>{l.r(Z),l.d(Z,{UsersModule:()=>F});var i=l(4006),m=l(6895),u=l(2510),e=l(4650);let U=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"router-outlet"),e.qZA()())},dependencies:[u.lC],encapsulation:2}),t})();var p=l(590),b=l(9876);function C(t,s){1&t&&e._UZ(0,"span",10)}function q(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Delete"),e.qZA())}function N(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",6)(8,"a",7),e._uU(9,"Edit"),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){const a=e.CHM(r).$implicit,d=e.oxw();return e.KtG(d.deleteUser(a.id))}),e.YNc(11,C,1,0,"span",9),e.YNc(12,q,2,0,"span",5),e.qZA()()()}if(2&t){const r=s.$implicit;e.xp6(2),e.Oqu(r.firstName),e.xp6(2),e.Oqu(r.lastName),e.xp6(2),e.Oqu(r.username),e.xp6(2),e.MGl("routerLink","edit/",r.id,""),e.xp6(2),e.Q6J("disabled",r.isDeleting),e.xp6(1),e.Q6J("ngIf",r.isDeleting),e.xp6(1),e.Q6J("ngIf",!r.isDeleting)}}function y(t,s){1&t&&(e.TgZ(0,"tr")(1,"td",11),e._UZ(2,"span",12),e.qZA()())}let J=(()=>{class t{constructor(r){this.accountService=r}ngOnInit(){this.accountService.getAll().pipe((0,p.P)()).subscribe(r=>this.users=r)}deleteUser(r){const n=this.users?.find(o=>o.id===r);n&&(n.isDeleting=!0,this.accountService.delete(r).pipe((0,p.P)()).subscribe(()=>this.users=this.users?.filter(o=>o.id!==r)))}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(b.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:17,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(r,n){1&r&&(e.TgZ(0,"h1"),e._uU(1,"Users"),e.qZA(),e.TgZ(2,"a",0),e._uU(3,"Add User"),e.qZA(),e.TgZ(4,"table",1)(5,"thead")(6,"tr")(7,"th",2),e._uU(8,"First Name"),e.qZA(),e.TgZ(9,"th",2),e._uU(10,"Last Name"),e.qZA(),e.TgZ(11,"th",2),e._uU(12,"Username"),e.qZA(),e._UZ(13,"th",3),e.qZA()(),e.TgZ(14,"tbody"),e.YNc(15,N,13,7,"tr",4),e.YNc(16,y,3,0,"tr",5),e.qZA()()),2&r&&(e.xp6(15),e.Q6J("ngForOf",n.users),e.xp6(1),e.Q6J("ngIf",!n.users))},dependencies:[m.sg,m.O5,u.yS],encapsulation:2}),t})();var D=l(5970);function I(t,s){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Add User"),e.qZA())}function S(t,s){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Edit User"),e.qZA())}function E(t,s){1&t&&(e.TgZ(0,"div",16),e._uU(1," \u{1f6d1} The first name is required "),e.qZA())}function L(t,s){1&t&&(e.TgZ(0,"div",16),e._uU(1," \u{1f6d1} The last name is required "),e.qZA())}function Q(t,s){1&t&&(e.TgZ(0,"div",16),e._uU(1," \u{1f6d1} The email is required "),e.qZA())}function Y(t,s){1&t&&(e.TgZ(0,"div",16),e._uU(1," \u{1f6d1} The email is invalid "),e.qZA())}function M(t,s){1&t&&(e.TgZ(0,"div",16),e._uU(1," \u{1f6d1} The last name is required "),e.qZA())}function k(t,s){1&t&&e._UZ(0,"span",17)}const c=function(t){return{"is-invalid":t}};let v=(()=>{class t{constructor(r,n,o,a,d){this.formBuilder=r,this.route=n,this.router=o,this.accountService=a,this.alertService=d,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const r=[i.kI.minLength(6)];this.isAddMode&&r.push(i.kI.required),this.form=this.formBuilder.group({firstName:["",i.kI.required],lastName:["",i.kI.required],username:["",i.kI.required],password:["",r]}),this.isAddMode||this.accountService.getById(this.id).pipe((0,p.P)()).subscribe(n=>this.form.patchValue(n))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}createUser(){this.accountService.register(this.form.value).pipe((0,p.P)()).subscribe({next:()=>{this.alertService.success("User added successfully",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:r=>{this.alertService.error(r),this.loading=!1}})}updateUser(){this.accountService.update(this.id,this.form.value).pipe((0,p.P)()).subscribe({next:()=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:r=>{this.alertService.error(r),this.loading=!1}})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(i.qu),e.Y36(u.gz),e.Y36(u.F0),e.Y36(b.B),e.Y36(D.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:30,vars:22,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["placeholder","name","id","firstName","type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["for","firstName"],["class","invalid-feedback",4,"ngIf"],["placeholder","name","id","lastName","type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["for","lastName"],["placeholder","name","id","username","type","email","formControlName","username",1,"form-control",3,"ngClass"],["for","username"],["placeholder","name","id","password","type","password","formControlName","password",1,"form-control",3,"ngClass"],["for","password"],[1,"form-group"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/users",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(r,n){if(1&r&&(e.YNc(0,I,2,0,"h1",0),e.YNc(1,S,2,0,"h1",0),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(3,"div",2),e._UZ(4,"input",3),e.TgZ(5,"label",4),e._uU(6,"First Name"),e.qZA(),e.YNc(7,E,2,0,"div",5),e.qZA(),e.TgZ(8,"div",2),e._UZ(9,"input",6),e.TgZ(10,"label",7),e._uU(11,"Last Name"),e.qZA(),e.YNc(12,L,2,0,"div",5),e.qZA(),e.TgZ(13,"div",2),e._UZ(14,"input",8),e.TgZ(15,"label",9),e._uU(16,"Email"),e.qZA(),e.YNc(17,Q,2,0,"div",5),e.YNc(18,Y,2,0,"div",5),e.qZA(),e.TgZ(19,"div",2),e._UZ(20,"input",10),e.TgZ(21,"label",11),e._uU(22,"Password"),e.qZA(),e.YNc(23,M,2,0,"div",5),e.qZA(),e.TgZ(24,"div",12)(25,"button",13),e.YNc(26,k,1,0,"span",14),e._uU(27," Save "),e.qZA(),e.TgZ(28,"a",15),e._uU(29,"Cancel"),e.qZA()()()),2&r){let o,a,d,f,A,g,h,T,_;e.Q6J("ngIf",n.isAddMode),e.xp6(1),e.Q6J("ngIf",!n.isAddMode),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("ngClass",e.VKq(14,c,n.submitted&&(null==(o=n.form.get("firstName"))?null:o.errors))),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(a=n.form.get("firstName"))?null:a.errors)&&(null==(a=n.form.get("firstName"))?null:a.errors).required),e.xp6(2),e.Q6J("ngClass",e.VKq(16,c,n.submitted&&(null==(d=n.form.get("lastName"))?null:d.errors))),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(f=n.form.get("lastName"))?null:f.errors)&&(null==(f=n.form.get("lastName"))?null:f.errors).required),e.xp6(2),e.Q6J("ngClass",e.VKq(18,c,n.submitted&&(null==(A=n.form.get("username"))?null:A.errors))),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(g=n.form.get("username"))?null:g.errors)&&(null==(g=n.form.get("username"))?null:g.errors).required),e.xp6(1),e.Q6J("ngIf",n.submitted&&(null==(h=n.form.get("username"))?null:h.errors)&&(null==(h=n.form.get("username"))?null:h.errors).email),e.xp6(2),e.Q6J("ngClass",e.VKq(20,c,n.submitted&&(null==(T=n.form.get("password"))?null:T.errors))),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(_=n.form.get("password"))?null:_.errors)&&(null==(_=n.form.get("password"))?null:_.errors).required),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(1),e.Q6J("ngIf",n.loading)}},dependencies:[m.mk,m.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,u.yS],encapsulation:2}),t})();const w=[{path:"",component:U,children:[{path:"",component:J},{path:"add",component:v},{path:"edit/:id",component:v}]}];let x=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(w),u.Bz]}),t})(),F=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,i.UX,x]}),t})()}}]);